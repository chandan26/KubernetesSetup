    1   sudo yum install -y yum-utils
    2  sudo yum-config-manager     --add-repo     https://download.docker.com/linux/centos/docker-ce.repo
    3  sudo yum install docker-ce docker-ce-cli containerd.io
    4  systemctl enable docker
    5  rpm -qa | grep docker
    6  sudo yum install -y yum-utils
    7  systemctl enable docker
    8  systemctl start docker
    9  docker pull docker/whalesay
   10  docker run docker/whalesay cowsay whoooo
   11  docker run docker/whalesay cowsay lmao
   12  docker ps -a
   13  cat <<EOF > /etc/yum.repos.d/kubernetes.repo
   14  [kubernetes]
   15  name=Kubernetes
   16  baseurl=https://packages.cloud.google.com/yum/repos/kubernetes-el7-x86_64
   17  enabled=1
   18  gpgcheck=1
   19  repo_gpgcheck=1
   20  gpgkey=https://packages.cloud.google.com/yum/doc/yum-key.gpg https://packages.cloud.google.com/yum/doc/rpm-package-key.gpg
   21  EOF
   22  yum install -y kubectl
   23  sudo setenforce 0
   24  sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config
   25  yum install -y kubelet-1.20.0-0 kubeadm-1.20.0-0 kubectl-1.20.0-0
   26  systemctl enable kubelet
   27  systemctl start kubelet
   28  kubeadm init --apiserver-advertise-address=10.190.0.5 --pod-network-cidr=192.168.0.0/16
   29  echo 1 > /proc/sys/net/ipv4/ip_forward
   30  cat /proc/sys/net/ipv4/ip_forward
   31  cat /etc/selinux/config
   32  vi /etc/selinux/config 
   33  cat /etc/selinux/config
   34  systemctl status kubelet
   35  ip a
   36  kubeadm init --apiserver-advertise-address=10.190.0.2 --pod-network-cidr=192.168.0.0/16
   37  yum install -y kubele kubeadm kubectl
   38  kubeadm init --apiserver-advertise-address=10.190.0.2 --pod-network-cidr=192.168.0.0/16
   39  kubeadm reset
   40  kubeadm init --apiserver-advertise-address=10.190.0.2 --pod-network-cidr=192.168.0.0/16
   41  mkdir -p $HOME/.kube
   42  sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config
   43  sudo chown $(id -u):$(id -g) $HOME/.kube/config
   44  kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml
   45  rpm -qa | grep kube
   46  kubeadm token create --print-join-command
   47  kubelet get nodes
   48  kubectl get nodes
   49  kubeadm token create --print-join-command
   50  kubectl get nodes
   51  passwd
   52  systemctl restart sshd
   53  kubectl get nodes
   54  kubectl get po
   55  cd /var/tmp/
   56  ls -lrth
   57  kubectl get svc
   58  mkdir chandan
   59  cd chandan/
   60  ls -lrth
   61  vi services.yml
   62  kubectl create deploy myservicedep --image=httpd --replicas=3 --dryrun=client -o yaml >2mydep.yml
   63  kubectl create deploy myservicedep --image=httpd --replicas=3 --dry-run=client -o yaml >2mydep.yml
   64  ls -lrth
   65  cat 2mydep.yml 
   66  vi 2mydep.yml 
   67  cat -n *
   68  kubectl get ep
   69  kubectl create -f .
   70  ls
   71  mv services.yml myserv.yml
   72  ls
   73  kubectl create deploy myservicedep --image=httpd --replicas=3 --dry-run=client -o yaml >2mydep.yml
   74  ls -lrth
   75  vi 2mydep.yml 
   76  kubectl create -f .
   77  rm -rf 2mydep.yml 
   78  kubectl get rs
   79  kubectl get po
   80  ls -lrth
   81  cat myserv.yml 
   82  kubectl create deploy myservicedep --image=sanjaymukherji/flaskwebapp:v2 --replicas=3 --dry-run=client -o yaml >3mydep.yml
   83  kubectl create -f .
   84  vi myserv.yml 
   85  kubectl create deploy myservicedep --image=sanjaymukherji/flaskwebapp:v2 --replicas=3 --dry-run=client -o yaml >4mydep.yml
   86  kubectl create -f .
   87  rm -rf 3mydep.yml 4mydep.yml 
   88  kubectl create deploy myservicedeply --image=sanjaymukherji/flaskwebapp:v2 --replicas=3 --dry-run=client -o yaml >mydeptest.yml
   89  vi mydeptest.yml 
   90  rm -rf mydeptest.yml 
   91  kubectl create deploy myservicedeply --image=sanjaymukherji/flaskwebapp:v2 --replicas=3 --dry-run=client -o yaml >mydeptest.yml
   92  vi mydeptest.yml 
   93  kubectl create -f .
   94  cat myserv.yml 
   95  vi myserv.yml 
   96  ll
   97  kubectl get po
   98  kubectl get ep
   99  kubectl get po -o wide
  100  kubectl get svc
  101  vi myserv.yml 
  102  kubectl get vc
  103  kubectl get svc
  104  ls -lrth
  105  kubectl create -f myserv.yml
  106  vi myserv.yml 
  107  kubectl create -f myserv.yml
  108  kubectl get svc
  109  kubectl get ep
  110  kubectl get po -o wide
  111  ssh kubeworker1
  112  kubectl get nodes
  113  cd /var/tmp/chandan/
  114  kubectl get nodes --show-labels
  115  kubectl label nodes -h
  116  kubectl label nodes worker1 company=ericsson
  117  kubectl get nodes
  118  kubectl label nodes kubeworker1 kubernetes.io/role=worker1
  119  kubectl label nodes worker1 company=ericsson
  120  kubectl get nodes
  121  kubectl label nodes worker1 company=ericsson
  122  kubectl label nodes kubeworker2 kubernetes.io/role=worker2
  123  kubectl get nodes
  124  kubectl label nodes worker1 company=ericsson
  125  kubectl label nodes kubeworker1 company=ericsson
  126  kubectl get nodes
  127  ls -lrth
  128  cat myserv.yml 
  129  vi nodeselector.yml
  130  kubectl get nodes --show-labels
  131  history
  132  kubectl get svc
  133  ls
  134  kubectl create -f nodeselector.yml 
  135  vi nodeselector.yml
  136  kubectl create -f nodeselector.yml 
  137  vi nodeselector.yml
  138  kubectl create -f nodeselector.yml 
  139  kubectl get svc
  140  kubectl get ep
  141  kubectl get po
  142  kubectl get po -o wide
  143  kubectl delete myservicedep-79d854b74b-7gp92 myservicedep-79d854b74b-ccdf5 myservicedep-79d854b74b-v5qlk myservicedeply-74b546864-fgmn5 myservicedeply-74b546864-glw79 myservicedeply-74b546864-th29z
  144  kubectl get po -o wide
  145  kubectl drain myservicedep-79d854b74b-7gp92 myservicedep-79d854b74b-ccdf5 myservicedep-79d854b74b-v5qlk myservicedeply-74b546864-fgmn5 myservicedeply-74b546864-glw79 myservicedeply-74b546864-th29z
  146  kubectl get po -o wide
  147  kubectl drain myservicedep-79d854b74b-7gp92
  148  kubectl get po 
  149  kubectl delete po myservicedep-79d854b74b-7gp92
  150  kubectl delete po myservicedep-79d854b74b-ccdf5
  151  kubectl delete po myservicedep-79d854b74b-v5qlk
  152  kubectl delete po myservicedeply-74b546864-fgmn5
  153  kubectl delete po myservicedeply-74b546864-glw79
  154  kubectl delete po myservicedeply-74b546864-th29z
  155  kubectl get nodes --show-labels
  156  kubectl get po -o wide
  157  kubectl delete rsmyrs
  158  kubectl delete myrs
  159  vi myserv.yml 
  160  cat nodeselector.yml 
  161  kubectl describe node kubeworker1 | grep - taint
  162  kubectl describe node kubeworker1 
  163  kubectl describe node kubeworker1 | grep -i taint
  164  kubectl label node kubeworker1 company-
  165  kubectl get po
  166  kubectl get nodes
  167  kubectl taint nodes worker1  company=ericsson:NoSchedule
  168  kubectl taint nodes kubeworker1  company=ericsson:NoSchedule
  169  kubectl  describe node kubeworker1 | grep -i taint
  170  ls
  171  vi nodeselector.yml 
  172  kubectl get po
  173  kubectl delete -f nodeselector.yml 
  174  kubectl get po
  175  ls
  176  kubectl create -f nodeselector.yml 
  177  kubectl get po -o --wide
  178  kubectl get po -o -wide
  179  kubectl get po -o wide
  180  cat nodeselector.yml 
  181  vi nodeselector.yml 
  182  kubectl get po
  183  kubectl delete -f nodeselector.yml 
  184  kubectl delete -f myserv.yml 
  185  kubectl get po
  186  ls
  187  kubectl mydeptest.yml 
  188  kubectl delete -f mydeptest.yml 
  189  kubectl get po
  190  cat nodeselector.yml 
  191  kubectl create -f nodeselector.yml 
  192  kubectl get po
  193  kubectl get po -o wide
  194  kubectl delete po myservicedep-79d854b74b-2smxp
  195  kubectl get po -o wide
  196  cat -n *
  197  ls -lrth
  198  kubectl  delete -f myserv.yml 
  199  history
  200  kubectl get po
  201  cd /var/tmp/chandan/
  202  ls -lrth
  203  kubectl delete nodeselector.yml 
  204  kubectl delete -f nodeselector.yml 
  205  kubectl get po
  206  kubectl get po -o wide
  207  history | grep taint
  208  kubectl get po -o wide
  209  kubectl delete myserv.yml
  210  ls
  211  kubectl delete -f mydeptest.yml 
  212  kubectl delete -f myserv.yml 
  213  kubectl delete -f nodeselector.yml 
  214  kubectl delete po 
  215  kubectl delete po myservicedep-79d854b74b-ldbdr
  216  kubectl get po -o wide
  217  kubectl delete po myservicedep-79d854b74b-n9wqk
  218  kubectl delete po myservicedep-79d854b74b-rfmkk
  219  kubectl get po -o wide
  220  cd /var/tmp/chandan/
  221  kubectl create deploy  testenv  --image=mysql:latest --dry-run=client -o yaml >1testenv.yaml
  222  ll
  223  history | grep taint 
  224  kubectl taint nodes worker1  company-
  225  kubectl taint nodes kubeworker1  company-
  226  mv 1testenv.yaml 
  227  mv 1testenv.yaml  testenv.yaml
  228  kubectl create deploy  testenv  --image=mysql:latest --dry-run=client -o yaml >testenv.yaml
  229  ls
  230  vi testenv.yaml 
  231  kubectl create -f testenv.yaml 
  232  kubectl get po
  233  kubectl log -h
  234  kubectl logs -h
  235  kubectl logs -f testenv.yaml 
  236  kubectl get po
  237  kubectl logs testenv-8558b5b876-fnd2x
  238  vi testenv.yaml 
  239  kubectl create -f testenv.yaml
  240  kubectl delete -f testenv.yaml 
  241  kubectl create -f testenv.yaml
  242  kubectl get po
  243  kubectl describe -h
  244  kubectl describe po testenv-f5f66fdc8-c58q9
  245  kubectl create config -h
  246  kubectl create configmap -h
  247  kubectl create configmap --from-literal=MYSQL_ROOT_PASSWORD=eric550n --dry-run=client -o yaml >myconfigtest.yaml
  248  kubectl create configmap myconfigmap --from-literal=MYSQL_ROOT_PASSWORD=eric550n --dry-run=client -o yaml >myconfigtest.yaml
  249  vi myconfigtest.yaml 
  250  vi testenv.yaml
  251  kubectl create -f testenv.yaml 
  252  vi testenv.yaml
  253  kubectl create -f testenv.yaml 
  254  vi testenv.yaml
  255  cat testenv.yaml
  256  kubectl create -f testenv.yaml 
  257  ls
  258  vi myconfigtest.yaml 
  259  kubectl get cm
  260  kubectl create -f myconfigtest.yaml 
  261  kubectl create -f testenv.yaml 
  262  kubectl get cm
  263  vi testenv.yaml 
  264  kubectl create -f testenv.yaml 
  265  kubectl get po
  266  kubectl delete -f "testenv.yaml"
  267  kubectl create -f testenv.yaml 
  268  kubectl get po
  269  kubectl describe testenv-7b8894d965-c78gk
  270  kubectl describe po testenv-7b8894d965-c78gk
  271  cd /var/tmp/chandan/
  272  kubectl create deploy volumetest --image=ubuntu --dry-run=client -o yaml >volumetest.yaml
  273  ls
  274  vi volumetest.yaml 
  275  cat volumetest.yaml 
  276  vi volumetest.yaml 
  277  cat volumetest.yaml 
  278  kubectl create -f volumetest.yaml 
  279  vi volumetest.yaml 
  280  cat volumetest.yaml 
  281  kubectl create -f volumetest.yaml 
  282  vi volumetest.yaml 
  283  kubectl create -f volumetest.yaml 
  284  vi volumetest.yaml 
  285  kubectl create -f volumetest.yaml 
  286  vi volumetest.yaml 
  287  kubectl create -f volumetest.yaml 
  288  kubectl get po -o wide
  289  ssh kubeworker1
  290  kubectl get po -o wide
  291  kubectl exec -it volumetest-fb5496586-pntf9
  292  kubectl exec -it volumetest-fb5496586-pntf9 /bin/bash
  293  kubectl describe po volumetest-fb5496586-pntf9
  294  wget helm-v3.0.0-linux-amd64.tar.gz
  295  wget https://get.helm.sh/helm-v3.6.3-linux-arm64.tar.gz
  296  yum instal wget
  297  yum install wget
  298  wget https://get.helm.sh/helm-v3.6.3-linux-arm64.tar.gz
  299  history
  300  ls
  301  ssh root@34.131.141.233
  302  consul agent
  303  netstat -ntlp
  304  netstat -ntlp | grep consul
  305  kubectl version --short
  306  helm version --short
  307  sudo yum install -y yum-utils
  308  sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/RHEL/hashicorp.repo
  309  sudo yum -y install consul
  310  consul
  311  consul agent -dev
  312  consul members
  313  consul agent -dev
  314  consul 
  315  consul members
  316  kubectl port-forward --address 0.0.0.0 consul-server-0 8501:8501
  317  kubectl port-forward --address 0.0.0.0 kubemaster 8501:8501
  318  hostname
  319  kubectl
  320  history 
  321  yum -y remove consul
  322  kubectl -v
  323  kubectl version -short
  324  kubectl version --short
  325  helm version --short
  326  curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get-helm-3
  327  chmod 700 get_helm.sh
  328  ./get_helm.sh
  329  helm version --short
  330  git clone https://github.com/hashicorp/learn-consul-kubernetes.git
  331  yum install git -y
  332  git clone https://github.com/hashicorp/learn-consul-kubernetes.git
  333  cd learn-consul-kubernetes/service-mesh/deploy
  334  helm repo add hashicorp https://helm.releases.hashicorp.com
  335  helm repo update
  336  helm install -f config.yaml consul hashicorp/consul --version "0.32.1"
  337  kubectl get pods --selector app=consul
  338  kubectl port-forward service/consul-ui 18500:80 --address 0.0.0.0
  339  kubectl get pods --selector app=consul
  340  helm status consul
  341  helm get all consul
  342  kubectl get pods --selector app=consul
  343  kubectl port-forward service/consul-ui 18500:80 --address 0.0.0.0
  344  kubectl get pods --selector app=consul
  345  kubectl describe pod consul-consul-server-0
  346  kubectl describe pod consul-server-0
  347  kubectl get nodes
  348  kubectl get pvc
  349  kubectl get pv
  350  kubectl get pvc
  351  ls -la /consul/data/
  352  kubectl get pods --selector app=consul
  353  history | grep kubectl
  354  kubectl delete
  355  kubectl get po
  356  cd
  357  ls 
  358  cd learn-consul-kubernetes/
  359  ls
  360  cd /
  361  ls -lrth
  362  cd /root/
  363  ls 
  364  kubectl get po
  365  kubectl delete po consul-connect-injector-webhook-deployment-57cc4bdd56-gg8cz consul-connect-injector-webhook-deployment-57cc4bdd56-t7c6w
  366  kubectl get po
  367  history | tail 30
  368  history 
  369  helm remove -f config.yaml consul hashicorp/consul --version "0.32.1"
  370  helm uninstall -f config.yaml consul hashicorp/consul --version "0.32.1"
  371  cd learn-consul-kubernetes/service-mesh/deploy
  372  ls -lrth
  373  helm uninstall -f config.yaml consul hashicorp/consul --version "0.32.1"
  374  helm uninstall
  375  helm uninstall consul hashicorp/consul --version "0.32.1"
  376  helm uninstall consul 
  377  kubectl get po
  378  cd /etc/consul.d/
  379  ls -lrth
  380  docker run --name consul -p 
  381  docker run -d --name consul-01 -p 8080:8500  consul
  382  docker ps -a
  383  docker ps -a | grep consul-01
  384  docker rm -f consul-01
  385  docker rm a2 a9 
  386  docker ps -a 
  387  history 
  388  history | head -n 60 >>kubemasterdeploy.txt
  389  ll
  390  cat kubemasterdeploy.txt 
  391  history >> masternodehistory.txt
